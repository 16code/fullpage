/* 
 * Chriswang
 * 396276123@qq.com
 * 2014.11.18
 * Github:https://github.com/powy1993/fullpage
 */
 
function FullPage(a){"use strict";function F(a,b,c,d){this.cx=3*a,this.bx=3*(c-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*b,this.by=3*(d-b)-this.cy,this.ay=1-this.cy-this.by}var n,o,t,u,v,w,x,y,z,A,B,C,D,E,b=document.getElementById(a.id),c=b.children,d=c.length,e=d,f=a.slideTime||800,g=a.effect||{},h=0,i={},j={},k={},l=[],m=[],p=" ",q=null,r=!1,s=!1;if(c&&1!==d){for(a.mode&&(s=-1!==a.mode.indexOf("nav:"),m=a.mode.split(","),n=m.length),u=0;d>u;u++)l.push(c[u].style);if(i={addEventListener:!!window.addEventListener,gravity:!!window.DeviceOrientationEvent,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,version:function(){var c,a=navigator.userAgent,b=a.indexOf("Android");return v=-1!==a.indexOf("QQBrowser")?200:0,-1!==b&&(c=a.substring(b+7,b+11).replace(" ","")),c||0}(),cssCore:function(a){switch(!0){case""===a.webkitTransition:return"webkit";case""===a.MozTransition:return"Moz";case""===a.msTransition:return"ms";case""===a.OTransition:return"O";default:return""}}(document.createElement("Chriswang").style)},F.prototype={epsilon:1e-5,sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,b){var c,d,e,f,g,h;for(e=a,h=0;8>h;h++){if(f=this.sampleCurveX(e)-a,Math.abs(f)<b)return e;if(g=this.sampleCurveDerivativeX(e),Math.abs(g)<b)break;e-=f/g}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c;){if(f=this.sampleCurveX(e),Math.abs(f-a)<b)return e;a>f?c=e:d=e,e=.5*(d-c)+c}return e},solve:function(a,b){return this.sampleCurveY(this.solveCurveX(a,b))}},w=function(){j={X:document.documentElement.clientWidth||window.innerWidth,Y:document.documentElement.clientHeight||window.innerHeight},b.style.height=j.Y+"px"},x=function(a,b,c,d){k.A=a,k.B=b,k.C=c,k.D=d},"string"==typeof a.easing)switch(a.easing){case"ease":x(.25,.1,.25,1);break;case"linear":x(0,0,1,1);break;case"ease-in":x(.42,0,1,1);break;case"ease-out":x(0,0,.58,1);break;case"ease-in-out":x(.42,0,.58,1)}else x(a.easing[0],a.easing[1],a.easing[2],a.easing[3]);if(""!==i.cssCore){for(;e--;)l[e][i.cssCore+"TransitionTimingFunction"]="cubic-bezier("+k.A+","+k.B+","+k.C+","+k.D+")";y=function(a,b,c,d){var e=a.style,f="translate("+b+"px,"+c+"px) translateZ(0)",g=arguments[4];g.scale&&(f+=0===d?" scale("+g.scale[0]+")":" scale("+g.scale[1]+")"),g.rotate&&(f+=0===d?" rotate("+g.rotate[0]+"deg)":" rotate("+g.rotate[1]+"deg)"),e[i.cssCore+"TransformOrigin"]="50% 50%",e[i.cssCore+"Transform"]=f}}else t=new F(k.A,k.B,k.C,k.D),y=function(a,b,c,d){var p,e=a.currentStyle,f=a.style,h=parseInt(f.left||e.left,10),i=parseInt(f.top||e.top,10),j=b-h,k=c-i,l=+new Date,m=l+d,n=0,o=g.opacity;clearInterval(q),q=setInterval(function(){var a;+new Date>m?(a=o?"left:"+b+"px;top:"+c+"px;filter:alpha(opacity="+100*o[1]+");":"left:"+b+"px;top:"+c+"px;",clearInterval(q)):(p=m-new Date,n=p/d,n=t.solve(1-n,F.prototype.epsilon),a="left:"+(h+j*n)+"px;top:"+(i+k*n)+"px;",o&&(a+="filter:alpha(opacity="+100*(o[1]*n-o[0]*(1-n))+");")),f.cssText=a},13)};for(z={transform:function(a,b,d){var e=0,g=""!==i.cssCore||"none"!==a.translate&&a.translate?v:-50;switch(a.translate){case"Y":e=d>b?j.Y:-j.Y,y(c[d],0,e,0,a);break;case"X":e=d>b?j.X:-j.X,y(c[d],e,0,0,a);break;case"XY":e={X:d>b?j.X:-j.X,Y:d>b?j.Y:-j.Y},y(c[d],e.X,e.Y,0,a);break;default:y(c[d],0,0,0,a)}setTimeout(function(){y(c[d],0,0,f,a)},g+50)},opacity:function(a,b,d){var e=c[d].style;e.opacity=a[0],setTimeout(function(){e.opacity=a[1]},70)}},A=i.addEventListener&&i.touch?function(a,b){a.addEventListener("touchstart",b,!1),arguments[2]&&a.addEventListener("touchmove",function(a){a.preventDefault()},!1)}:function(a,b){a.onclick=b},B=function(a,b,c){var f,d=a.className,e=[];if(-1!==d.indexOf(b)){for(e=d.split(p),f=e.length;f--;)e[f]===b&&(c===p||""===c?e.splice(f,1):e[f]=c);e.length?a.className=e.join(p):(a.removeAttribute("class"),a.removeAttribute("className"))}},s&&(D=function(a,b){var c=o[b].className;B(o[a],"active",p),o[b].className=""===c?"active":c+" active"}),C=function(b){var j,k,e=v;if(!(r||b===h||b>=d||0>b)){r=!0;for(k in g)z[k](g[k],h,b);e+=""===i.cssCore?20:0,j=h,h=b,s&&D(j,h),setTimeout(function(){c[b].className+=" slide"},e),setTimeout(function(){l[b][i.cssCore+"TransitionDuration"]=f+"ms"},20),setTimeout(function(){B(c[j],"current",""),B(c[h],"slide","current"),a.callback&&a.callback(h,c[h]),r=!1},f+v+120)}},w(),u=c[h].className,c[h].className=-1!==u.indexOf("current")?u:u+" current",i.addEventListener?window.addEventListener("resize",w,!1):window.onresize=w;n--;)!function(e){switch(!0){case"wheel"===e:E=function(a){var b;a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1,r||(b=-a.wheelDelta||a.detail,b=0>b?-1:1,C(h+b))},i.addEventListener&&document.addEventListener("DOMMouseScroll",E,!1),window.onmousewheel=document.onmousewheel=E;break;case"touch"===e:if(!i.touch||!i.addEventListener)break;!function(){var v,w,x,y,z,A,m=(g.transform.scale[0],g.transform.scale[1]-g.transform.scale[0]),n=g.transform.rotate[0],o=g.transform.rotate[1]-g.transform.rotate[0],p={},q={},t={};"Y"===g.transform.translate?(x=function(){v=l[h-1],w=l[h+1],v&&(v[i.cssCore+"Transform"]="translate(0,-"+j.Y+"px) translateZ(0)",v[i.cssCore+"TransformOrigin"]="50% 100%",c[h-1].className+=" swipe"),w&&(w[i.cssCore+"Transform"]="translate(0,"+j.Y+"px) translateZ(0)",w[i.cssCore+"TransformOrigin"]="50% 0%",c[h+1].className+=" swipe")},A=function(a){var b=Math.abs(a.y/j.Y),c=" scale("+.7*m*b+") rotate("+(n+o*b)+"deg)";v&&a.y>0&&(v[i.cssCore+"Transform"]="translate(0,"+(a.y-j.Y)+"px) translateZ(0)"+c),w&&a.y<0&&(w[i.cssCore+"Transform"]="translate(0,"+(j.Y+a.y)+"px) translateZ(0)"+c)},y=function(a,b){var d=f>>1;B(c[h+b],"swipe","slide"),a[i.cssCore+"TransitionDuration"]=d+"ms",a[i.cssCore+"Transform"]="translate(0,"+b*j.Y+"px) translateZ(0)",setTimeout(function(){B(c[h+b],"slide",""),setTimeout(function(){r=!1},50)},d)},z=function(a,b){var e=h+b,g=~~(f/1.5),j=c[h-b];return j&&B(j,"swipe",""),0>e||e>d-1?(setTimeout(function(){r=!1},50),void 0):(s&&D(h,e),B(c[e],"swipe","slide"),a[i.cssCore+"TransitionDuration"]=g+"ms",a[i.cssCore+"Transform"]="translate(0,0) translateZ(0)",setTimeout(function(){B(c[h],"current",""),B(c[e],"slide","current"),h=e,setTimeout(function(){r=!1},50)},g),void 0)}):(x=function(){v=l[h-1],w=l[h+1],v&&(v[i.cssCore+"Transform"]="translate(-"+j.X+"px,0) translateZ(0)",v[i.cssCore+"TransformOrigin"]="100% 50%",c[h-1].className+=" swipe"),w&&(w[i.cssCore+"Transform"]="translate("+j.X+"px,0) translateZ(0)",w[i.cssCore+"TransformOrigin"]="0 50%",c[h+1].className+=" swipe")},A=function(a){var b=Math.abs(a.x/j.X),c=" scale("+.7*m*b+") rotate("+(n+o*b)+"deg)";v&&a.x>0&&(v[i.cssCore+"Transform"]="translate("+(a.x-j.X)+"px,0) translateZ(0)"+c),w&&a.x<0&&(w[i.cssCore+"Transform"]="translate("+(j.X+a.x)+"px,0) translateZ(0)"+c)},y=function(a,b){var d=f>>1;B(c[h+b],"swipe","slide"),a[i.cssCore+"TransitionDuration"]=d+"ms",a[i.cssCore+"Transform"]="translate("+b*j.X+"px,0) translateZ(0)",setTimeout(function(){B(c[h+b],"slide",""),setTimeout(function(){r=!1},50)},d)},z=function(a,b){var e=h+b,g=~~(f/1.5),j=c[h-b];return j&&B(j,"swipe",""),0>e||e>d-1?(setTimeout(function(){r=!1},50),void 0):(s&&D(h,e),B(c[e],"swipe","slide"),a[i.cssCore+"TransitionDuration"]=g+"ms",a[i.cssCore+"Transform"]="translate(0,0) translateZ(0)",setTimeout(function(){B(c[h],"current",""),B(c[e],"slide","current"),h=e,setTimeout(function(){r=!1},50)},g),void 0)}),p={start:function(a){var c=a.touches[0];a.preventDefault(),r||(r=!0,q={x:c.pageX,y:c.pageY,time:+new Date},t={},x(),b.addEventListener("touchmove",p.move,!1),b.addEventListener("touchend",p.end,!1))},move:function(a){var b=a.touches[0];a.preventDefault(),event.touches.length>1||event.scale&&1!==event.scale||(t={x:b.pageX-q.x,y:b.pageY-q.y},A(t))},end:function(d){var e=d.changedTouches[0],f=+new Date-q.time,g={},i=0,k=!1;switch(t={x:e.pageX-q.x,y:e.pageY-q.y},g={x:Math.abs(t.x),y:Math.abs(t.y)},a.effect.transform.translate){case"Y":k=250>+f&&g.y>30||g.y>.3*j.Y,i=t.y>0?-1:1;break;case"X":k=250>+f&&g.x>30||g.x>.3*j.X,i=t.x>0?-1:1;break;default:k=350>+f&&g.y+g.x>50||g.y>.3*j.Y||g.x>.3*j.X,i=g.x>g.y?t.x>0?-1:1:t.y>0?-1:1}k?(-1===i?z(v,-1):z(w,1),a.callback&&a.callback(h,c[h])):(v&&y(v,-1),w&&y(w,1)),b.removeEventListener("touchmove",p.move,!1),b.removeEventListener("touchend",p.end,!1)}},b.addEventListener("touchstart",p.start,!1)}();break;case-1!==e.indexOf("nav:"):!function(){var c,d,f,a=e.split(":")[1],b=document.getElementById(a);if(o=b.children,c=o.length,f=o[h].className,b&&o){for(;c--;)o[c].setAttribute("data-page",c);-1===f.indexOf("active")&&(o[h].className=""===f?"active":f+" active"),d=function(a){var b;for(a=a||window.event,a=a.target||a.srcElement,b=a.tagName.toLowerCase();"li"!==b;){if("ul"===b)return;a=a.parentNode,b=a.tagName.toLowerCase()}C(+a.getAttribute("data-page"))},A(b,d,1)}}()}}(m[n]);return{thisPage:function(){return h},go:function(a){C(a)},next:function(){C(h+1)},prev:function(){C(h-1)}}}}