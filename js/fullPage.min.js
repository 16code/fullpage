/* 
 * Chriswang
 * 396276123@qq.com
 * 2014.11.13
 * Github:https://github.com/powy1993/fullpage
 */
function FullPage(l){function A(a,c,b,d){this.cx=3*a;this.bx=3*(b-a)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*c;this.by=3*(d-c)-this.cy;this.ay=1-this.cy-this.by}var q=document.getElementById(l.id),f=q.children,B=f.length,t=B,C=l.slideTime||800,D=l.effect||{},g=0,v,E,h,u,n,F,G,H,I,J=[],K,k,L=null,w=!1,M=!1,O,x,y,p,r,P,Q,z,s,R,N;if(f&&1!==B){l.mode&&(M=-1!==l.mode.indexOf("nav:"),J=l.mode.split(","),K=J.length);v=!!window.addEventListener;E="ontouchstart"in window||window.DocumentTouch&&document instanceof
DocumentTouch;(function(){var a=navigator.userAgent,c=a.indexOf("Android"),b;x=-1!==a.indexOf("QQBrowser")?200:0;-1!==c&&(b=a.substring(c+7,c+11).replace(" ",""));return b||0})();h=function(a){switch(!0){case ""===a.webkitTransition:return"webkit";case ""===a.MozTransition:return"Moz";case ""===a.msTransition:return"ms";case ""===a.OTransition:return"O";default:return""}}(document.createElement("Chriswang").style);A.prototype={epsilon:1E-5,sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*
a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,c){var b,d,e,m;e=a;for(d=0;8>d;d++){m=this.sampleCurveX(e)-a;if(Math.abs(m)<c)return e;b=this.sampleCurveDerivativeX(e);if(Math.abs(b)<c)break;e-=m/b}b=0;d=1;e=a;if(e<b)return b;if(e>d)return d;for(;b<d;){m=this.sampleCurveX(e);if(Math.abs(m-a)<c)break;a>m?b=e:d=e;e=.5*(d-b)+b}return e},solve:function(a,c){return this.sampleCurveY(this.solveCurveX(a,
c))}};y=function(){q.style.height=document.documentElement.clientHeight+"px"||window.innerHeight+"px";u=q.offsetWidth;n=q.offsetHeight};p=function(a,c,b,d){F=a;G=c;H=b;I=d};if("string"===typeof l.easing)switch(l.easing){case "ease":p(.25,.1,.25,1);break;case "linear":p(0,0,1,1);break;case "ease-in":p(.42,0,1,1);break;case "ease-out":p(0,0,.58,1);break;case "ease-in-out":p(.42,0,.58,1)}else p(l.easing[0],l.easing[1],l.easing[2],l.easing[3]);if(""!==h){for(;t--;)f[t].style[h+"TransitionTimingFunction"]=
"cubic-bezier("+F+","+G+","+H+","+I+")";r=function(a,c,b,d,e){a=a.style;c="translate("+c+"px,"+b+"px) translateZ(0)";e.scale&&(c+=0===d?" scale("+e.scale[0]+")":" scale("+e.scale[1]+")");e.rotate&&(c+=0===d?" rotate("+e.rotate[0]+"deg)":" rotate("+e.rotate[1]+"deg)");a[h+"Transform"]=c}}else O=new A(F,G,H,I),r=function(a,c,b,d){var e=a.currentStyle,m=a.style,f=parseInt(m.left||e.left,10),g=parseInt(m.top||e.top,10),l=c-f,q=b-g,k=+new Date+d,n=0,h=D.opacity,p;clearInterval(L);L=setInterval(function(){var a;
+new Date>k?(a=h?"left:"+c+"px;top:"+b+"px;filter:alpha(opacity="+100*h[1]+");":"left:"+c+"px;top:"+b+"px;",clearInterval(L)):(p=k-new Date,n=p/d,n=O.solve(1-n,A.prototype.epsilon),a="left:"+(f+l*n)+"px;top:"+(g+q*n)+"px;",h&&(a+="filter:alpha(opacity="+100*(h[1]*n-h[0]*(1-n))+");"));m.cssText=a},13)};P={transform:function(a,c,b){var d=0,e=""!==h||"none"!==a.translate&&a.translate?x:-50;switch(a.translate){case "Y":d=b>c?n:-n;r(f[b],0,d,0,a);break;case "X":d=b>c?u:-u;r(f[b],d,0,0,a);break;case "XY":d=
{X:b>c?u:-u,Y:b>c?n:-n};r(f[b],d.X,d.Y,0,a);break;default:r(f[b],0,0,0,a)}setTimeout(function(){r(f[b],0,0,C,a)},e+50)},opacity:function(a,c,b){var d=f[b].style;d.opacity=a[0];setTimeout(function(){d.opacity=a[1]},70)}};Q=v&&E?function(a,c,b){a.addEventListener("touchstart",c,!1);b&&a.addEventListener("touchmove",function(a){a.preventDefault()},!1)}:function(a,c){a.onclick=c};z=function(a,c,b){var d=a.className,e=[];if(-1!==d.indexOf(c)){e=d.split(" ");for(d=e.length;d--;)e[d]===c&&(" "===b||""===
b?e.splice(d,1):e[d]=b);e.length?a.className=e.join(" "):(a.removeAttribute("class"),a.removeAttribute("className"))}};M&&(R=function(a,c){var b=k[c].className;z(k[a],"active"," ");k[c].className=""===b?"active":b+" active"});s=function(a){var c=x,b,d;if(!(w||a===g||a>=B||0>a)){w=!0;for(d in D)P[d](D[d],g,a);c+=""===h?20:0;b=g;g=a;M&&R(b,g);setTimeout(function(){f[a].className+=" slide"},c);setTimeout(function(){f[a].style[h+"TransitionDuration"]=C+"ms"},20);setTimeout(function(){z(f[b],"current",
"");z(f[g],"slide","current");l.callback&&l.callback(g,f[g]);w=!1},C+x+120)}};y();t=f[g].className;f[g].className=-1!==t.indexOf("current")?t:t+" current";for(v?window.addEventListener("resize",y,!1):window.onresize=y;K--;)(function(a){switch(!0){case "wheel"===a:N=function(a){a=a||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1;w||(a=-a.wheelDelta||a.detail,s(g+(0>a?-1:1)))};v&&document.addEventListener("DOMMouseScroll",N,!1);window.onmousewheel=document.onmousewheel=N;break;case "touch"===
a:if(!E||!v)break;(function(){var a,b,d={};a=function(a){1<event.touches.length||event.scale&&1!==event.scale||a.preventDefault()};b=function(e){var m=e.changedTouches[0];e=+new Date-d.time;var f,h,k;f=0;var p=!1;f=m.pageX-d.x;m=m.pageY-d.y;h=Math.abs(f);k=Math.abs(m);switch(l.effect.transform.translate){case "Y":p=250>+e&&20<k||k>.3*n;f=0<m?-1:1;break;case "X":p=250>+e&&20<h||h>.4*n;f=0<f?-1:1;break;default:p=250>+e&&50<k+h||k>.2*n||h>.3*u,f=h>k?0<f?-1:1:0<m?-1:1}p&&s(g+f);q.removeEventListener("touchmove",
a,!1);q.removeEventListener("touchend",b,!1)};q.addEventListener("touchstart",function(e){e=e.touches[0];d={x:e.pageX,y:e.pageY,time:+new Date};q.addEventListener("touchmove",a,!1);q.addEventListener("touchend",b,!1)},!1)})();break;case -1!==a.indexOf("nav:"):(function(){var c=a.split(":")[1],c=document.getElementById(c),b,d;k=c.children;b=k.length;d=k[g].className;if(c&&k){for(;b--;)k[b].setAttribute("data-page",b);-1===d.indexOf("active")&&(k[g].className=""===d?"active":d+" active");b=function(a){var b;
a=a||window.event;a=a.target||a.srcElement;for(b=a.tagName.toLowerCase();"li"!==b;){if("ul"===b)return;a=a.parentNode;b=a.tagName.toLowerCase()}s(+a.getAttribute("data-page"))};Q(c,b,1)}})()}})(J[K]);return{thisPage:function(){return g},go:function(a){s(a)},next:function(){s(g+1)},prev:function(){s(g-1)}}}};